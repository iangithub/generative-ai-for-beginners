<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "ea4bbe640847aafbbba14dae4625e9af",
  "translation_date": "2025-07-09T12:13:33+00:00",
  "source_file": "07-building-chat-applications/README.md",
  "language_code": "zh-tw"
}
-->
# 建置由生成式 AI 驅動的聊天應用程式

[![建置由生成式 AI 驅動的聊天應用程式](../../../translated_images/07-lesson-banner.a279b937f2843833fe28b4597f51bdef92d0ad03efee7ba52d0f166dea7574e5.en.png)](https://aka.ms/gen-ai-lessons7-gh?WT.mc_id=academic-105485-koreyst)

> _（點擊上方圖片觀看本課影片）_

現在我們已經探討了如何建置文字生成應用程式，讓我們將注意力轉向聊天應用程式。

聊天應用程式已成為我們日常生活的一部分，提供的功能遠不止於閒聊。它們在客戶服務、技術支援甚至進階諮詢系統中扮演著關鍵角色。您最近很可能曾接受過聊天應用程式的協助。隨著我們將生成式 AI 等更先進的技術整合到這些平台中，它們的複雜性和所涉及的挑戰也隨之增加。

需要考慮的一些重要問題是：

- **建置應用程式**。我們如何有效地開發並無縫地將這些由 AI 驅動的應用程式整合到特定的使用案例中？
- **監控**。部署後，我們如何監控並確保這些應用程式在功能和符合[負責任 AI 的六項原則](https://www.microsoft.com/ai/responsible-ai?WT.mc_id=academic-105485-koreyst)方面都保持最高品質？

隨著我們進入一個由自動化和流暢的人機互動所定義的時代，了解生成式 AI 如何重塑聊天應用程式的範圍、深度和彈性至關重要。本課將探討支援這些複雜系統的架構元素，深入研究為特定領域任務微調它們的方法，並檢視負責任 AI 部署所必需的指標和考量因素。

## 簡介

本課涵蓋：

- 有效建置和整合聊天應用程式的技術。
- 如何客製化和微調應用程式。
- 有效監控聊天應用程式的策略和考量因素。

## 學習目標

在本課結束時，您將能夠：

- 描述建置和整合聊天應用程式到現有系統中的關鍵考量因素。
- 為特定使用案例客製化聊天應用程式。
- 識別有效監控和維護由 AI 驅動的聊天應用程式品質的重要指標和考量因素。
- 確保聊天應用程式負責任地使用 AI。

## 將生成式 AI 整合到聊天應用程式中

用生成式 AI 增強聊天應用程式不僅僅是讓它們更聰明；更是要優化其架構、效能和使用者介面，以提供高品質的使用者體驗。這涉及檢視架構基礎、API 整合和 UI 設計。本節提供了一個全面的藍圖，幫助您駕馭這些複雜的領域，無論您是整合到現有系統中還是建置獨立的平台。

在本節結束時，您將具備有效建置和整合聊天應用程式所需的知識。

### 聊天機器人或聊天應用程式？

在我們開始建置聊天應用程式之前，讓我們先比較一下「聊天機器人」和「由 AI 驅動的聊天應用程式」，因為它們扮演著不同的角色和功能。聊天機器人的主要目標是自動化特定的對話任務，例如回答常見問題或追蹤包裹。它通常基於規則邏輯或複雜的 AI 演算法運作。相較之下，由 AI 驅動的聊天應用程式是一個更廣泛的環境，旨在支援各種形式的數位通訊，包括人類使用者之間的文字、語音和視訊聊天。其定義性特徵是整合了生成式 AI 模型，該模型可模擬細緻入微、類似人類的對話，並根據不同的輸入和上下文線索產生回應。由生成式 AI 驅動的聊天應用程式可以參與開放領域的討論、適應不斷變化的對話上下文，甚至可以創造富有創意或複雜的對話。

下表突顯了關鍵的差異和相似之處，以釐清它們在數位通訊中的不同角色。

| 聊天機器人 | 由 AI 驅動的聊天應用程式 |
| --- | --- |
| 任務導向且基於規則 | 上下文感知 |
| 通常整合到較大的系統中 | 可能託管一個或多個聊天機器人 |
| 僅限於已編程的功能 | 整合生成式 AI 模型 |
| 專門化且結構化的互動 | 能夠進行開放領域的討論 |

### 利用 SDK 和 API 的預建功能

在建置聊天應用程式時，一個明智的第一步是評估現有的可用資源。使用 SDK 和 API 來建置聊天應用程式是一個有益的方法，原因有幾個。透過整合文件齊全的 SDK 和 API，您可以為您的應用程式的長期成功奠定基礎，並解決可擴展性和維護方面的挑戰。

- **加速開發並減少開銷**：使用預建功能而非從頭開始建置所有功能，讓您可以專注於應用程式的其他重要部分，例如業務邏輯。
- **更好的效能**：當您自己建置功能時，您最終會問：「這如何擴展？它能處理突然激增的使用者嗎？」維護良好的 SDK 和 API 通常包含針對這些問題的內建解決方案。
- **更容易維護**：更新和改進更容易管理，因為大多數 API 和 SDK 在新版本發布時只需要更新一個程式庫。
- **取得尖端技術**：使用在大型資料集上經過微調和訓練的模型，可為您的應用程式提供先進的自然語言能力。

存取 SDK 或 API 功能通常需要使用服務的權限，通常是透過唯一的金鑰或驗證權杖。我們將使用 OpenAI Python 程式庫來示範這一點。您也可以在本課的下列 [OpenAI 筆記本](../../../07-building-chat-applications/python/oai-assignment.ipynb) 或 [Azure OpenAI 服務筆記本](../../../07-building-chat-applications/python/aoai-assignment.ipynb) 中親自嘗試。

```python
import os
from openai import OpenAI

API_KEY = os.getenv("OPENAI_API_KEY","")

client = OpenAI(
    api_key=API_KEY
    )

chat_completion = client.chat.completions.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "為生成式 AI 的聊天應用程式教學課程建議兩個標題。"}])
```

上面的範例使用 GPT-3.5 Turbo 模型來完成提示，但請注意，必須預先設定 API 金鑰。如果未設定金鑰，您將會收到錯誤。

## 使用者體驗 (UX)

一般的 UX 原則適用於聊天應用程式，但由於涉及機器學習元件，因此有一些額外的考量因素變得特別重要。

- **處理模糊性**：生成式 AI 模型有時會產生模稜兩可的答案。當這種情況發生時，一個讓使用者可以要求澄清的功能會很有幫助。
- **上下文保留**：先進的生成式 AI 模型可以在對話中記住上下文，這可以大大提升使用者體驗。允許使用者控制和管理上下文可以提高可用性，但也會引發隱私問題。考慮這些資訊的儲存時間——引入保留政策可以在上下文需求和隱私之間取得平衡。
- **個人化**：能夠學習和適應的 AI 模型可以提供個人化的體驗。透過使用者個人資料等功能客製化使用者體驗，不僅讓使用者感到被理解，還有助於他們更有效地找到特定答案，從而創造更令人滿意的互動。

個人化的一個例子是 OpenAI 的 ChatGPT 中的「自訂指令」功能。它讓您可以提供有關您自己的資訊，這些資訊可以作為您提示的重要上下文。以下是一個自訂指令的範例。

![ChatGPT 中的自訂指令設定](../../../translated_images/custom-instructions.b96f59aa69356fcfed456414221919e8996f93c90c20d0d58d1bc0221e3c909f.en.png)

這個「個人資料」指示 ChatGPT 建立一個關於連結串列的課程計畫。請注意 ChatGPT 如何考慮到使用者可能希望根據她的經驗獲得更深入的課程計畫。

![ChatGPT 中關於連結串列課程計畫的提示](../../../translated_images/lesson-plan-prompt.cc47c488cf1343df5d67aa796a1acabca32c380e5b782971e289f6ab8b21cf5a.en.png)

### 微軟的大型語言模型系統訊息框架

[微軟提供指引](https://learn.microsoft.com/azure/ai-services/openai/concepts/system-message#define-the-models-output-format?WT.mc_id=academic-105485-koreyst)說明如何撰寫有效的系統訊息以從 LLM 產生回應，並分為四個方面：

1. 定義模型的對象，以及其能力和限制。
2. 定義模型的輸出格式。
3. 提供具體範例，展示模型的預期行為。
4. 新增額外的行為護欄。

### 無障礙性

無論使用者是否有視覺、聽覺、運動或認知障礙，一個設計良好的聊天應用程式都應該對所有人無障礙。以下清單概述了旨在改善各種障礙無障礙性的功能。

- **視覺障礙**：高對比度主題、可調整大小的文字、螢幕閱讀器相容性。
- **聽覺障礙**：文字轉語音和語音轉文字功能、音訊通知的視覺提示。
- **運動障礙**：鍵盤導覽支援、語音指令。
- **認知障礙**：簡化的語言選項。

## 針對特定領域語言模型的客製化與微調

想像一個能理解您公司術語並預測您使用者常問問題的聊天應用程式。有幾種值得考慮的方法：

- **利用 DSL 模型**。DSL 代表特定領域語言。您可以使用在特定領域上訓練的 DSL 模型來理解其概念和情境。
- **應用微調**。微調涉及使用特定資料進一步訓練您的模型。

## 客製化：使用 DSL

使用特定領域語言模型 (DSL 模型) 可以透過提供專門的、與上下文相關的互動來提高使用者參與度。這些模型經過訓練或微調，以理解和產生與特定領域、行業或主題相關的文字。使用 DSL 模型的選項範圍從從頭開始訓練一個，到透過 SDK 和 API 使用預先存在的模型。另一個選項是微調，它會將現有的預訓練模型調整為特定領域。

## 客製化：應用微調

當預訓練模型在專門領域或任務中表現不佳時，通常會考慮微調。

例如，醫療查詢很複雜，需要大量上下文。當醫療專業人員診斷患者時，他們會考慮許多因素，例如生活方式或既往病史，並可能依賴最近的醫學期刊來支持他們的診斷。在這種細微的情況下，通用 AI 聊天應用程式不能成為可靠的來源。

### 情境：醫療應用程式

想像一個旨在協助醫療從業人員的聊天應用程式，提供快速存取治療指南、藥物交互作用或最新研究結果。

通用模型或許能處理基本的醫療問題或一般建議，但它可能在以下方面遇到困難：

- **高度特定或複雜的案例**。例如，神經科醫師可能會問：「目前治療小兒抗藥性癲癇的最佳實務是什麼？」
- **缺乏最新進展**。通用模型可能無法提供包含神經學和藥理學最新發展的答案。

在這些情況下，使用專門的醫療資料集對模型進行微調，可以大大提高其準確可靠地處理複雜醫療查詢的能力。這需要存取一個龐大、相關的資料集，以反映要解決的特定領域挑戰和問題。

## 高品質 AI 驅動聊天體驗的考量因素

本節概述了「高品質」聊天應用程式的標準，包括擷取可行的指標，以及遵循負責任地利用 AI 技術的框架。

### 關鍵指標

為了維持高品質的效能，追蹤關鍵指標和考量因素至關重要。這些測量不僅確保應用程式的功能，還評估 AI 模型的品質和使用者體驗。以下清單涵蓋了需要記住的基本、AI 和使用者體驗指標。

| 指標 | 定義 | 聊天開發人員的考量因素 |
| --- | --- | --- |
| **正常執行時間** | 測量應用程式可供使用者操作和存取的時間。 | 您將如何將停機時間降至最低？ |
| **回應時間** | 應用程式回應使用者查詢所需的時間。 | 您如何優化查詢處理以改善回應時間？ |
| **精確率** | 真陽性預測與陽性預測總數的比率。 | 您將如何驗證模型的精確率？ |
| **召回率（靈敏度）** | 真陽性預測與實際陽性數量的比率。 | 您將如何測量和改善召回率？ |
| **F1 分數** | 精確率和召回率的調和平均數，平衡兩者之間的權衡。 | 您的目標 F1 分數是多少？您將如何平衡精確率和召回率？ |
| **困惑度** | 測量模型的預測機率分佈與實際資料分佈的匹配程度。 | 您將如何將困惑度降至最低？ |
| **使用者滿意度指標** | 測量使用者對應用程式的看法，通常透過調查收集。 | 您將多久收集一次使用者回饋？您將如何根據回饋進行調整？ |
| **錯誤率** | 模型在理解或輸出方面出錯的頻率。 | 您有哪些策略可以降低錯誤率？ |
| **重新訓練週期** | 模型更新以納入新資料和見解的頻率。 | 您將多久重新訓練一次模型？什麼會觸發重新訓練週期？ |
| **異常偵測** | 用於識別不符合預期行為的異常模式的工具和技術。 | 您將如何回應異常？ |

### 在聊天應用程式中實施負責任的 AI 實務

微軟的負責任 AI 方法強調了六項應指導 AI 開發和使用的原則。以下是這些原則、其定義，以及聊天開發人員應考慮的事項以及這些要點為何重要。

| 原則 | 微軟的定義 | 聊天開發人員的考量因素 | 為何重要 |
| --- | --- | --- | --- |
| 公平性 | AI 系統應公平對待每個人。 | 確保聊天應用程式不會根據使用者資料進行歧視。 | 在使用者之間建立信任和包容性；有助於避免法律問題。 |
| 可靠性與安全性 | AI 系統應可靠且安全地運作。 | 使用測試和故障安全機制來減少錯誤和風險。 | 確保使用者滿意度並防止可能的傷害。 |
| 隱私權與安全性 | AI 系統應安全並尊重隱私權。 | 應用強大的加密和資料保護措施。 | 保護敏感的使用者資料並確保遵守隱私法規。 |
| 包容性 | AI 系統應賦予並吸引每個人。 | 設計對不同使用者而言無障礙且易於使用的 UI/UX。 | 使應用程式可供更廣泛的受眾使用。 |
| 透明度 | AI 系統應易於理解。 | 為 AI 回應提供清楚的文件和說明。 | 如果使用者了解決策的制定方式，他們就更有可能信任系統。 |
| 問責制 | 人們應對 AI 系統負責。 | 建立清楚的流程來稽核和改善 AI 決策。 | 支援持續改進和在發生錯誤時採取糾正措施。 |

## 作業

請參閱[作業](../../../07-building-chat-applications/python)以進行一系列練習，從執行您的第一個聊天提示到分類和摘要文字等等。請注意，作業提供多種程式語言版本！

## 做得好！繼續旅程

完成本課後，請探索我們的 [生成式 AI 學習合輯](https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst) 以繼續增進您的生成式 AI 技能！

前往第 8 課，學習如何開始[建置搜尋應用程式](../08-building-search-applications/README.md?WT.mc_id=academic-105485-koreyst)！

**免責聲明**：
本文件已使用 AI 翻譯服務 [Co-op Translator](https://github.com/Azure/co-op-translator) 進行翻譯。雖然我們力求準確，但請注意，自動翻譯可能包含錯誤或不準確之處。應以其母語的原始文件為權威來源。對於關鍵資訊，建議進行專業的人工翻譯。我們對因使用本翻譯而產生的任何誤解或曲解概不負責。